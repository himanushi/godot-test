## 重要: 言語設定

**このプロジェクトでは必ず日本語で回答してください。**

* 短く端的に回答すること。だらだら説明しないこと。質問された内容にのみ答えること。

## プロジェクト概要

このプロジェクトは SRPG をどう作るのかを調査するためのものです。SRPG の開発に関する情報を収集し、整理し、提供します。
ローグライク SRPG です。死んだら最初から。右に無限に進む。

## 要件

### ゲームシステム
* 横スクロールでマス目状の上をひとますずつ移動できる
* 奥行きが5マスで、横幅が無限に続く
* 左から右に進む
* 敵キャラと味方キャラが存在する
* キャラにはステータスがある
  * HP
  * 攻撃力
  * 防御力
  * 移動力
  * スピード

## UI/グラフィック仕様

### ビジュアルスタイル
* **視点**: クォータービュー(斜め上から見下ろす)
* **参考**: ロックマンエグゼのバトルフィールド
* **グリッド**: 正方形のマス目(四角いマス)
* **キャラクター**: ペーパーマリオ風の薄い板状スプライト

### フィールド構成
* **奥行き**: 5マス
* **横幅**: 無限(右方向にスクロール)
* **マス表示**: 正方形グリッド、斜め上からの視点

### UI要素

#### 上部バー
* 天気表示(アイコン + テキスト)
* 時間/ターン数
* 進行距離(何マス進んだか)
* メニューボタン

#### メインフィールド(中央)
* 5マス(奥行き) × 横スクロール可能なグリッド
* プレイヤーキャラと敵キャラの表示
* マス目の境界を明確に表示
* 選択中のマスをハイライト

#### 背景
* フィールドの奥(5マス目)の上から上部メニューまでの間に背景を配置
* ParallaxBackgroundで視差スクロール効果
  * 遠景: 山、森のシルエット
  * 中景: 木々
  * 近景: 草
  * 空・雲

#### キャラクター情報(左下)
* 選択中キャラのポートレート
* HP(現在値/最大値、バー表示)
* 攻撃力・防御力
* 移動力(残り移動可能マス数/最大値)
* スピード

#### コマンドメニュー(中央下)
* 攻撃
* 移動
* 待機
* 道具

#### 持ち物/インベントリ(右下)
* アイテム一覧(アイコン + 個数)
* コンパクトに表示

### オブジェクト配置

#### ペーパーマリオ風表現
* 薄い板状のスプライト(正面向き)
* オブジェクトによって複数マスを占有可能
* 上方向に伸びる表現(木、建物など)

#### オブジェクトの種類

**町エリア:**
* 店: 2x2マスなど複数マス占有
* 家: 複数マス占有
* 看板: 1マス
* 街灯: 1マス

**森エリア:**
* 木(大): 1マス占有、上に大きく伸びる
* 木(小): 1マス占有
* 岩: 1マス占有
* 草むら: 1マス占有

#### 遮蔽物の透過処理
* プレイヤーがオブジェクトの後ろ(Y座標が小さい位置)にいる時
* オブジェクトを半透明(alpha=0.3程度)にする
* プレイヤーが見えるようにする
* ナムコの特許(特許第3350772号)は2023年に期限切れのため使用可能

### レイヤー構造

描画順(奥から手前):
1. **背景レイヤー**(ParallaxBackground): 空、雲、遠くの山
2. **フィールドレイヤー**(TileMap/GridMap): マス目のグリッド、地面
3. **オブジェクトレイヤー**(Node2D): 木、店、岩などのスプライト(Y座標でソート)
4. **キャラクターレイヤー**(Node2D): プレイヤー、敵(Y座標でソート)
5. **UIレイヤー**(CanvasLayer): ステータス、コマンドなど

### インタラクション

#### 移動
* 移動可能マスをハイライト(青く光らせる)
* 移動力の範囲内で移動可能

#### 攻撃
* 攻撃範囲を赤くハイライト
* ロックマンエグゼ風のエフェクト
